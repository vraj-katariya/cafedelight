import{F as r,J as s,N as p,_b as n,bc as c,h as i}from"./chunk-IDMXUBOL.js";var u=class a{constructor(t){this.http=t}apiUrl=`${c.apiUrl}/cart`;cartSubject=new i(null);cart$=this.cartSubject.asObservable();get cartValue(){return this.cartSubject.value}get itemCount(){return this.cartSubject.value?this.cartSubject.value.items.reduce((t,e)=>t+e.quantity,0):0}getCart(){return this.http.get(this.apiUrl).pipe(r(t=>{t.success&&t.cart&&this.cartSubject.next(t.cart)}))}addToCart(t,e=1){return this.http.post(`${this.apiUrl}/add`,{menuItemId:t,quantity:e}).pipe(r(()=>this.getCart().subscribe()))}updateQuantity(t,e){return this.http.put(`${this.apiUrl}/update`,{menuItemId:t,quantity:e}).pipe(r(()=>this.getCart().subscribe()))}removeFromCart(t){return this.http.delete(`${this.apiUrl}/remove/${t}`).pipe(r(()=>this.getCart().subscribe()))}clearCart(){return this.http.delete(`${this.apiUrl}/clear`).pipe(r(()=>this.cartSubject.next(null)))}resetCart(){this.cartSubject.next(null)}static \u0275fac=function(e){return new(e||a)(p(n))};static \u0275prov=s({token:a,factory:a.\u0275fac,providedIn:"root"})};export{u as a};
