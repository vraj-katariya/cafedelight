import{a as O}from"./chunk-NDU335UD.js";import{a as x}from"./chunk-SF5532BX.js";import{q as C,s as M}from"./chunk-UFBRTC2V.js";import{b,d as S}from"./chunk-5EQP7JGP.js";import{Da as g,Ha as h,Rb as P,Ta as c,Ua as n,Ub as I,Va as o,a as v,ab as s,b as f,cb as y,ib as p,kb as a,lb as _,mb as u,qa as i,ya as m}from"./chunk-IDMXUBOL.js";function F(d,r){if(d&1&&(n(0,"div",6),a(1),o()),d&2){let e=y();i(),_(e.message)}}function E(d,r){if(d&1&&(n(0,"div",7)(1,"h4"),a(2,"Order Summary"),o(),n(3,"p"),a(4),o(),n(5,"p")(6,"strong"),a(7),o()()()),d&2){let e=y();i(4),u("Order ID: ",e.order._id),i(3),u("Total Amount: $",e.order.total)}}var k=class d{constructor(r,e,t,l,D){this.route=r;this.router=e;this.paymentService=t;this.orderService=l;this.fb=D;this.paymentForm=this.fb.group({paymentDetails:["Test Payment Details"]})}orderId="";order=null;paymentForm;selectedMethod="card";message="";isLoading=!1;ngOnInit(){this.orderId=this.route.snapshot.paramMap.get("id")||"",this.orderId&&this.loadOrder()}loadOrder(){this.orderService.getOrder(this.orderId).subscribe({next:r=>{this.order=r.data||r.order||r,this.order||(this.message="Order not found")},error:r=>this.message="Error loading order"})}selectMethod(r){this.selectedMethod=r}processPayment(){if(!this.orderId)return;this.isLoading=!0;let r={orderId:this.orderId,method:this.selectedMethod,paymentDetails:f(v({},this.paymentForm.value),{simulation:!0})};this.paymentService.createPayment(this.orderId,this.selectedMethod,f(v({},this.paymentForm.value),{simulation:!0})).subscribe({next:e=>{alert("Payment Successful!"),this.router.navigate(["/orders"])},error:e=>{this.message="Payment Failed: "+(e.error?.message||e.message),this.isLoading=!1}})}static \u0275fac=function(e){return new(e||d)(m(b),m(S),m(O),m(x),m(C))};static \u0275cmp=g({type:d,selectors:[["app-payment"]],decls:16,vars:10,consts:[[1,"container"],["class","alert alert-danger",4,"ngIf"],["class","order-summary",4,"ngIf"],[1,"payment-methods"],[1,"method-card",3,"click"],[1,"btn","btn-primary","btn-lg","btn-block","mt-4",3,"click","disabled"],[1,"alert","alert-danger"],[1,"order-summary"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"h2"),a(2,"Payment"),o(),h(3,F,2,1,"div",1)(4,E,8,2,"div",2),n(5,"div",3)(6,"h4"),a(7,"Select Payment Method"),o(),n(8,"div",4),s("click",function(){return t.selectMethod("card")}),a(9," Credit/Debit Card "),o(),n(10,"div",4),s("click",function(){return t.selectMethod("upi")}),a(11," UPI "),o(),n(12,"div",4),s("click",function(){return t.selectMethod("wallet")}),a(13," Wallet "),o()(),n(14,"button",5),s("click",function(){return t.processPayment()}),a(15),o()()),e&2&&(i(3),c("ngIf",t.message),i(),c("ngIf",t.order),i(4),p("selected",t.selectedMethod==="card"),i(2),p("selected",t.selectedMethod==="upi"),i(2),p("selected",t.selectedMethod==="wallet"),i(2),c("disabled",t.isLoading||!t.order),i(),u(" ",t.isLoading?"Processing...":"Pay Now"," "))},dependencies:[I,P,M],styles:[".container[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto;padding:2rem;border:1px solid #eee;border-radius:8px}.method-card[_ngcontent-%COMP%]{border:1px solid #ddd;padding:1rem;margin:.5rem 0;cursor:pointer;border-radius:4px}.selected[_ngcontent-%COMP%]{background-color:#e3f2fd;border-color:#2196f3}.order-summary[_ngcontent-%COMP%]{background:#f9f9f9;padding:1rem;margin-bottom:2rem}"]})};export{k as PaymentComponent};
