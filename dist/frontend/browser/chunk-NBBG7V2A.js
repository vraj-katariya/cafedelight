import{a as E}from"./chunk-K2DYP7YT.js";import{a as T}from"./chunk-SF5532BX.js";import{r as z}from"./chunk-UFBRTC2V.js";import{d as w,e as S,h as I}from"./chunk-5EQP7JGP.js";import{Da as P,Oa as p,Pa as u,Ra as M,Sa as y,T as s,Ta as h,U as g,Ua as n,Ub as k,Va as r,Wa as b,_a as v,ab as f,cb as l,kb as i,lb as d,mb as _,oa as O,qa as a,ya as x}from"./chunk-IDMXUBOL.js";var q=(o,e)=>e.menuItem._id;function F(o,e){o&1&&(n(0,"div",2),b(1,"div",5),n(2,"p"),i(3,"Loading cart..."),r()())}function L(o,e){o&1&&(n(0,"div",3)(1,"span",6),i(2,"\u{1F6D2}"),r(),n(3,"h3"),i(4,"Your cart is empty"),r(),n(5,"p"),i(6,"Looks like you haven't added anything yet"),r(),n(7,"a",7),i(8,"Browse Menu"),r()())}function j(o,e){if(o&1&&b(0,"img",16),o&2){let t=l().$implicit;h("src",t.menuItem.image,O)("alt",t.menuItem.name)}}function D(o,e){if(o&1&&i(0),o&2){let t=l().$implicit;_(" ",t.menuItem.name.charAt(0)," ")}}function $(o,e){if(o&1){let t=v();n(0,"div",9)(1,"div",15),p(2,j,1,2,"img",16)(3,D,1,1),r(),n(4,"div",17)(5,"h3"),i(6),r(),n(7,"p",18),i(8),r(),n(9,"p",19),i(10),r()(),n(11,"div",20)(12,"button",21),f("click",function(){let m=s(t).$implicit,C=l(2);return g(C.updateQuantity(m.menuItem._id,m.quantity-1))}),i(13,"-"),r(),n(14,"span",22),i(15),r(),n(16,"button",21),f("click",function(){let m=s(t).$implicit,C=l(2);return g(C.updateQuantity(m.menuItem._id,m.quantity+1))}),i(17,"+"),r()(),n(18,"div",23),i(19),r(),n(20,"button",24),f("click",function(){let m=s(t).$implicit,C=l(2);return g(C.removeItem(m.menuItem._id))}),i(21," \u2715 "),r()()}if(o&2){let t=e.$implicit,c=l(2);a(2),u(t.menuItem.image?2:3),a(4),d(t.menuItem.name),a(2),d(t.menuItem.category),a(2),_("",c.formatPrice(t.price)," each"),a(5),d(t.quantity),a(4),_(" ",c.formatPrice(t.price*t.quantity)," ")}}function R(o,e){o&1&&(b(0,"span",25),i(1," Processing... "))}function Q(o,e){if(o&1&&i(0),o&2){let t=l(2);_(" Place Order - ",t.formatPrice(t.cart.total)," ")}}function Y(o,e){if(o&1){let t=v();n(0,"div",4)(1,"div",8),M(2,$,22,6,"div",9,q),n(4,"button",10),f("click",function(){s(t);let m=l();return g(m.clearCart())}),i(5,"Clear Cart"),r()(),n(6,"div",11)(7,"h2"),i(8,"Order Summary"),r(),n(9,"div",12)(10,"span"),i(11,"Subtotal"),r(),n(12,"span"),i(13),r()(),n(14,"div",12)(15,"span"),i(16),r(),n(17,"span"),i(18),r()(),n(19,"div",13)(20,"span"),i(21,"Total"),r(),n(22,"span"),i(23),r()(),n(24,"button",14),f("click",function(){s(t);let m=l();return g(m.checkout())}),p(25,R,2,0)(26,Q,1,1),r()()()}if(o&2){let t=l();a(2),y(t.cart.items),a(11),d(t.formatPrice(t.cart.subtotal)),a(3),_("GST (",t.cart.gstRate,"%)"),a(2),d(t.formatPrice(t.cart.gstAmount)),a(5),d(t.formatPrice(t.cart.total)),a(),h("disabled",t.isCheckingOut),a(),u(t.isCheckingOut?25:26)}}var V=class o{constructor(e,t,c){this.cartService=e;this.orderService=t;this.router=c}cart=null;isLoading=!0;isCheckingOut=!1;ngOnInit(){this.loadCart()}loadCart(){this.isLoading=!0,this.cartService.getCart().subscribe({next:e=>{e.success&&e.cart&&(this.cart=e.cart),this.isLoading=!1},error:()=>{this.isLoading=!1}})}updateQuantity(e,t){if(t<1){this.removeItem(e);return}this.cartService.updateQuantity(e,t).subscribe({next:()=>this.loadCart()})}removeItem(e){this.cartService.removeFromCart(e).subscribe({next:()=>this.loadCart()})}clearCart(){confirm("Are you sure you want to clear the cart?")&&this.cartService.clearCart().subscribe({next:()=>{this.cart=null}})}checkout(){!this.cart||this.cart.items.length===0||(this.isCheckingOut=!0,this.orderService.createOrder("","").subscribe({next:e=>{e.success&&e.order&&this.router.navigate(["/orders",e.order._id]),this.isCheckingOut=!1},error:()=>{this.isCheckingOut=!1,alert("Failed to create order. Please try again.")}}))}formatPrice(e){return"\u20B9"+e.toFixed(2)}static \u0275fac=function(t){return new(t||o)(x(E),x(T),x(w))};static \u0275cmp=P({type:o,selectors:[["app-cart"]],decls:8,vars:3,consts:[[1,"cart-page"],[1,"highlight"],[1,"loading"],[1,"empty-cart"],[1,"cart-layout"],[1,"spinner-large"],[1,"empty-icon"],["routerLink","/menu",1,"btn-browse"],[1,"cart-items"],[1,"cart-item"],[1,"btn-clear",3,"click"],[1,"cart-summary"],[1,"summary-row"],[1,"summary-row","total"],[1,"btn-checkout",3,"click","disabled"],[1,"item-image"],[3,"src","alt"],[1,"item-details"],[1,"item-category"],[1,"item-price"],[1,"item-quantity"],[1,"qty-btn",3,"click"],[1,"qty-value"],[1,"item-total"],[1,"remove-btn",3,"click"],[1,"spinner"]],template:function(t,c){t&1&&(n(0,"div",0)(1,"h1"),i(2,"Your "),n(3,"span",1),i(4,"Cart"),r()(),p(5,F,4,0,"div",2),p(6,L,9,0,"div",3),p(7,Y,27,6,"div",4),r()),t&2&&(a(5),u(c.isLoading?5:-1),a(),u(!c.isLoading&&(!c.cart||c.cart.items.length===0)?6:-1),a(),u(!c.isLoading&&c.cart&&c.cart.items.length>0?7:-1))},dependencies:[k,I,S,z],styles:[".cart-page[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.cart-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#fff;margin-bottom:2rem}@media(max-width:600px){.cart-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem}}.highlight[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f39c12,#e74c3c);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.loading[_ngcontent-%COMP%]{text-align:center;padding:4rem}.spinner-large[_ngcontent-%COMP%]{width:50px;height:50px;border:3px solid rgba(255,255,255,.1);border-top-color:#f39c12;border-radius:50%;margin:0 auto 1rem;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-cart[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:20px}.empty-icon[_ngcontent-%COMP%]{font-size:5rem;display:block;margin-bottom:1rem}.empty-cart[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;margin-bottom:.5rem}.empty-cart[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888;margin-bottom:2rem}.btn-browse[_ngcontent-%COMP%]{display:inline-block;padding:1rem 2rem;background:linear-gradient(135deg,#f39c12,#e74c3c);color:#fff;text-decoration:none;border-radius:12px;font-weight:600;transition:all .3s ease}.btn-browse[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 30px #f39c124d}.cart-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 380px;gap:2rem}.cart-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.cart-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:16px;padding:1.25rem;border:1px solid rgba(255,255,255,.1)}.item-image[_ngcontent-%COMP%]{width:60px;height:60px;background:linear-gradient(135deg,#2a2a4a,#3a3a5a);border-radius:12px;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.item-details[_ngcontent-%COMP%]{flex:1}.item-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-bottom:.25rem;font-size:1rem}.item-category[_ngcontent-%COMP%]{color:#888;font-size:.85rem;margin-bottom:.25rem}.item-price[_ngcontent-%COMP%]{color:#f39c12;font-size:.9rem}.item-quantity[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.qty-btn[_ngcontent-%COMP%]{width:32px;height:32px;background:#ffffff1a;border:none;border-radius:8px;color:#fff;font-size:1.2rem;cursor:pointer;transition:all .3s ease}.qty-btn[_ngcontent-%COMP%]:hover{background:#f39c12}.qty-value[_ngcontent-%COMP%]{color:#fff;font-weight:600;width:30px;text-align:center}.item-total[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:1.1rem;min-width:80px;text-align:right}.remove-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#e74c3c;font-size:1.2rem;cursor:pointer;padding:.5rem;transition:all .3s ease}.remove-btn[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.btn-clear[_ngcontent-%COMP%]{background:transparent;border:1px solid #e74c3c;color:#e74c3c;padding:.75rem 1.5rem;border-radius:10px;cursor:pointer;font-weight:500;transition:all .3s ease;align-self:flex-start}.btn-clear[_ngcontent-%COMP%]:hover{background:#e74c3c;color:#fff}.cart-summary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:20px;padding:2rem;border:1px solid rgba(255,255,255,.1);position:sticky;top:100px;height:fit-content}.cart-summary[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:1.5rem;font-size:1.3rem}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.75rem 0;border-bottom:1px solid rgba(255,255,255,.1);color:#aaa}.summary-row.total[_ngcontent-%COMP%]{border-bottom:none;color:#fff;font-size:1.25rem;font-weight:700;margin-top:.5rem;padding-top:1rem;border-top:2px solid rgba(255,255,255,.1)}.checkout-form[_ngcontent-%COMP%]{margin-top:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#aaa;font-size:.9rem;margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:10px;color:#fff;font-size:.9rem;resize:none;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#f39c12}.btn-checkout[_ngcontent-%COMP%]{width:100%;padding:1rem;background:linear-gradient(135deg,#f39c12,#e74c3c);border:none;border-radius:12px;color:#fff;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:.5rem;margin-top:1rem}.btn-checkout[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 10px 30px #f39c124d}.btn-checkout[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@media(max-width:900px){.cart-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}.cart-summary[_ngcontent-%COMP%]{position:static}}@media(max-width:600px){.cart-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:60px 1fr auto;gap:.75rem;padding:1rem}.item-details[_ngcontent-%COMP%]{width:100%}.item-quantity[_ngcontent-%COMP%]{grid-column:2 / 3}.item-total[_ngcontent-%COMP%]{grid-column:2 / 4;text-align:left;min-width:unset}.remove-btn[_ngcontent-%COMP%]{grid-column:3 / 4;grid-row:1 / 2}.btn-clear[_ngcontent-%COMP%]{width:100%;text-align:center}}@media(max-width:480px){.cart-page[_ngcontent-%COMP%]{padding:1rem}.cart-summary[_ngcontent-%COMP%]{padding:1.25rem}}"]})};export{V as CartComponent};
