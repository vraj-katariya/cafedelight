import{a as L}from"./chunk-A577FLIF.js";import{e as A,f as T,h as w}from"./chunk-5EQP7JGP.js";import{Da as b,Oa as s,Pa as m,Pb as D,Qa as v,Ra as p,Sa as g,Sb as k,Ta as _,Tb as y,Ua as e,Ub as I,Va as t,Wa as h,cb as c,jb as O,kb as n,lb as d,mb as u,nb as M,qa as r,sb as P,ub as f,vb as S,wb as E,ya as C}from"./chunk-IDMXUBOL.js";var z=()=>({exact:!0}),x=(a,o)=>o._id;function B(a,o){a&1&&(e(0,"div",9),h(1,"div",10),e(2,"p"),n(3,"Loading dashboard..."),t()())}function N(a,o){a&1&&(e(0,"p",20),n(1,"No orders yet"),t())}function F(a,o){if(a&1&&(e(0,"tr")(1,"td",26),n(2),t(),e(3,"td"),n(4),t(),e(5,"td",27),n(6),t(),e(7,"td")(8,"span",28),n(9),f(10,"titlecase"),t()(),e(11,"td",29),n(12),t()()),a&2){let i=o.$implicit,l=c(3);r(2),d(i._id.slice(-8).toUpperCase()),r(2),d(l.getUserName(i.user)),r(2),d(l.formatPrice(i.total)),r(2),_("ngClass",l.getStatusClass(i.status)),r(),u(" ",S(10,6,i.status)," "),r(3),d(l.formatDate(i.createdAt))}}function R(a,o){if(a&1&&(e(0,"div",21)(1,"table",25)(2,"thead")(3,"tr")(4,"th"),n(5,"Order ID"),t(),e(6,"th"),n(7,"Customer"),t(),e(8,"th"),n(9,"Total"),t(),e(10,"th"),n(11,"Status"),t(),e(12,"th"),n(13,"Date"),t()()(),e(14,"tbody"),p(15,F,13,8,"tr",null,x),t()()()),a&2){let i=c(2);r(15),g(i.recentOrders.slice(0,5))}}function $(a,o){a&1&&(e(0,"p",20),n(1,"No bookings yet"),t())}function j(a,o){if(a&1&&(e(0,"tr")(1,"td"),n(2),f(3,"date"),t(),e(4,"td"),n(5),t(),e(6,"td"),n(7),t(),e(8,"td"),n(9),t(),e(10,"td")(11,"span",30),n(12),t()()()),a&2){let i=o.$implicit;r(2),d(E(3,7,i.date,"shortDate")),r(3),d(i.timeSlot),r(2),u("Table ",i.table==null?null:i.table.tableNumber),r(2),d((i.user==null?null:i.user.name)||"Guest"),r(2),O("status-"+i.status.toLowerCase()),r(),u(" ",i.status," ")}}function q(a,o){if(a&1&&(e(0,"div",21)(1,"table",25)(2,"thead")(3,"tr")(4,"th"),n(5,"Date"),t(),e(6,"th"),n(7,"Time"),t(),e(8,"th"),n(9,"Table"),t(),e(10,"th"),n(11,"Customer"),t(),e(12,"th"),n(13,"Status"),t()()(),e(14,"tbody"),p(15,j,13,10,"tr",null,x),t()()()),a&2){let i=c(2);r(15),g(i.recentBookings)}}function G(a,o){a&1&&(e(0,"p",20),n(1,"No sales data yet"),t())}function Q(a,o){if(a&1&&(e(0,"div",31)(1,"span",32),n(2),t(),e(3,"span",33),n(4),t()()),a&2){let i=o.$implicit;r(2),d(i._id),r(2),u("",i.totalQuantity," sold")}}function H(a,o){if(a&1&&(e(0,"div",23),p(1,Q,5,2,"div",31,x),t()),a&2){let i=c(2);r(),g(i.topItems)}}function J(a,o){a&1&&(e(0,"p",20),n(1,"No users yet"),t())}function K(a,o){if(a&1&&(e(0,"div",34)(1,"div",35),n(2),t(),e(3,"div",36)(4,"span",37),n(5),t(),e(6,"span",38),n(7),t()()()),a&2){let i=o.$implicit;r(2),d(i.name.charAt(0)),r(3),d(i.name),r(2),d(i.email)}}function V(a,o){if(a&1&&(e(0,"div",24),p(1,K,8,3,"div",34,v),t()),a&2){let i=c(2);r(),g(i.recentUsers)}}function W(a,o){if(a&1&&(e(0,"div",11)(1,"div",12)(2,"span",13),n(3,"\u{1F465}"),t(),e(4,"div",14)(5,"span",15),n(6),t(),e(7,"span",16),n(8,"Total Users"),t()()(),e(9,"div",12)(10,"span",13),n(11,"\u{1F4E6}"),t(),e(12,"div",14)(13,"span",15),n(14),t(),e(15,"span",16),n(16,"Total Orders"),t()()(),e(17,"div",12)(18,"span",13),n(19,"\u{1F37D}\uFE0F"),t(),e(20,"div",14)(21,"span",15),n(22),t(),e(23,"span",16),n(24,"Menu Items"),t()()(),e(25,"div",17)(26,"span",13),n(27,"\u{1F4B0}"),t(),e(28,"div",14)(29,"span",15),n(30),t(),e(31,"span",16),n(32,"Total Revenue"),t()()(),e(33,"div",12)(34,"span",13),n(35,"\u{1F4C5}"),t(),e(36,"div",14)(37,"span",15),n(38),t(),e(39,"span",16),n(40,"Today's Bookings"),t()()(),e(41,"div",12)(42,"span",13),n(43,"\u{1FA91}"),t(),e(44,"div",14)(45,"span",15),n(46),t(),e(47,"span",16),n(48,"Tables Available"),t()()()(),e(49,"div",18)(50,"div",19)(51,"h2"),n(52,"Recent Orders"),t(),s(53,N,2,0,"p",20)(54,R,17,0,"div",21),t(),e(55,"div",19)(56,"h2"),n(57,"Recent Table Bookings"),t(),s(58,$,2,0,"p",20)(59,q,17,0,"div",21),t(),e(60,"div",22)(61,"div",19)(62,"h3"),n(63,"Top Selling Items"),t(),s(64,G,2,0,"p",20)(65,H,3,0,"div",23),t(),e(66,"div",19)(67,"h3"),n(68,"Recent Users"),t(),s(69,J,2,0,"p",20)(70,V,3,0,"div",24),t()()()),a&2){let i=c();r(6),d(i.stats.totalUsers),r(8),d(i.stats.totalOrders),r(8),d(i.stats.totalMenuItems),r(8),d(i.formatPrice(i.stats.totalRevenue)),r(8),d(i.stats.todaysBookings),r(8),M("",i.stats.availableTables,"/",i.stats.totalTables),r(7),m(i.recentOrders.length===0?53:54),r(5),m(i.recentBookings.length===0?58:59),r(6),m(i.topItems.length===0?64:65),r(5),m(i.recentUsers.length===0?69:70)}}var U=class a{constructor(o){this.adminService=o}stats=null;recentOrders=[];recentUsers=[];recentBookings=[];topItems=[];isLoading=!0;ngOnInit(){this.loadDashboard()}loadDashboard(){this.isLoading=!0,this.adminService.getDashboard().subscribe({next:o=>{o.success&&(this.stats=o.dashboard.stats,this.recentOrders=o.dashboard.recentOrders,this.recentUsers=o.dashboard.recentUsers,this.recentBookings=o.dashboard.recentBookings,this.topItems=o.dashboard.topItems),this.isLoading=!1},error:()=>{this.isLoading=!1}})}formatPrice(o){return"\u20B9"+o.toFixed(2)}formatDate(o){return new Date(o).toLocaleDateString("en-IN",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}getStatusClass(o){return{pending:"status-pending",confirmed:"status-confirmed",preparing:"status-preparing",ready:"status-ready",delivered:"status-delivered",cancelled:"status-cancelled"}[o]||""}getUserName(o){return o?typeof o=="string"?"User #"+o.slice(-4):o.name||"N/A":"N/A"}static \u0275fac=function(i){return new(i||a)(C(L))};static \u0275cmp=b({type:a,selectors:[["app-admin-dashboard"]],decls:19,vars:4,consts:[[1,"admin-dashboard"],[1,"admin-header"],[1,"highlight"],[1,"admin-nav"],["routerLink","/admin","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/admin/users","routerLinkActive","active"],["routerLink","/admin/menu","routerLinkActive","active"],["routerLink","/admin/tables","routerLinkActive","active"],["routerLink","/admin/bookings","routerLinkActive","active"],[1,"loading"],[1,"spinner-large"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","revenue"],[1,"dashboard-grid"],[1,"section-card"],[1,"empty-text"],[1,"table-container"],[1,"side-sections"],[1,"top-items-list"],[1,"users-list"],[1,"data-table"],[1,"order-id"],[1,"price"],[1,"status-badge",3,"ngClass"],[1,"date"],[1,"status-badge"],[1,"top-item"],[1,"item-name"],[1,"item-qty"],[1,"user-item"],[1,"user-avatar"],[1,"user-info"],[1,"user-name"],[1,"user-email"]],template:function(i,l){i&1&&(e(0,"div",0)(1,"div",1)(2,"h1"),n(3,"Admin "),e(4,"span",2),n(5,"Dashboard"),t()(),e(6,"div",3)(7,"a",4),n(8,"Overview"),t(),e(9,"a",5),n(10,"Users"),t(),e(11,"a",6),n(12,"Menu"),t(),e(13,"a",7),n(14,"Tables"),t(),e(15,"a",8),n(16,"Bookings"),t()()(),s(17,B,4,0,"div",9),s(18,W,71,11),t()),i&2&&(r(7),_("routerLinkActiveOptions",P(3,z)),r(10),m(l.isLoading?17:-1),r(),m(!l.isLoading&&l.stats?18:-1))},dependencies:[I,D,w,A,T,k,y],styles:[".admin-dashboard[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.admin-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;flex-wrap:wrap;gap:1rem}.admin-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;color:#fff}.highlight[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b59b6,#8e44ad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.admin-nav[_ngcontent-%COMP%]{display:flex;gap:.5rem}.admin-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:.5rem 1rem;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:8px;color:#fff;text-decoration:none;transition:all .3s ease}.admin-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#ffffff1a}.admin-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b59b6,#8e44ad);border-color:transparent}.loading[_ngcontent-%COMP%]{text-align:center;padding:4rem}.spinner-large[_ngcontent-%COMP%]{width:50px;height:50px;border:3px solid rgba(255,255,255,.1);border-top-color:#9b59b6;border-radius:50%;margin:0 auto 1rem;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.5rem;margin-bottom:2rem}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:16px;padding:1.5rem;display:flex;align-items:center;gap:1rem;border:1px solid rgba(255,255,255,.1)}.stat-card.revenue[_ngcontent-%COMP%]{border-color:#f39c124d}.stat-icon[_ngcontent-%COMP%]{font-size:2.5rem}.stat-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-value[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#fff}.stat-label[_ngcontent-%COMP%]{color:#888;font-size:.9rem}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 350px;gap:1.5rem}.section-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:16px;padding:1.5rem;border:1px solid rgba(255,255,255,.1)}.section-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .section-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-bottom:1rem;font-size:1.1rem}.empty-text[_ngcontent-%COMP%]{color:#888;text-align:center;padding:2rem}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;text-align:left;border-bottom:1px solid rgba(255,255,255,.05)}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#888;font-weight:500;font-size:.85rem}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#fff}.order-id[_ngcontent-%COMP%]{color:#9b59b6!important;font-weight:600}.price[_ngcontent-%COMP%]{color:#f39c12!important;font-weight:600}.date[_ngcontent-%COMP%]{color:#888!important;font-size:.85rem}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:15px;font-size:.75rem;font-weight:500}.status-pending[_ngcontent-%COMP%]{background:#f1c40f33;color:#f1c40f}.status-confirmed[_ngcontent-%COMP%]{background:#3498db33;color:#3498db}.status-preparing[_ngcontent-%COMP%]{background:#9b59b633;color:#9b59b6}.status-ready[_ngcontent-%COMP%], .status-delivered[_ngcontent-%COMP%]{background:#2ecc7133;color:#2ecc71}.status-cancelled[_ngcontent-%COMP%]{background:#e74c3c33;color:#e74c3c}.side-sections[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.top-items-list[_ngcontent-%COMP%], .users-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.top-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid rgba(255,255,255,.05)}.item-name[_ngcontent-%COMP%]{color:#fff}.item-qty[_ngcontent-%COMP%]{color:#888;font-size:.9rem}.user-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.5rem 0}.user-avatar[_ngcontent-%COMP%]{width:36px;height:36px;background:linear-gradient(135deg,#9b59b6,#8e44ad);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.user-name[_ngcontent-%COMP%]{color:#fff;font-size:.9rem}.user-email[_ngcontent-%COMP%]{color:#888;font-size:.8rem}@media(max-width:900px){.dashboard-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.admin-dashboard[_ngcontent-%COMP%]{padding:1rem}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:.75rem}.stat-card[_ngcontent-%COMP%]{padding:1rem;flex-direction:column;text-align:center;gap:.5rem}.stat-icon[_ngcontent-%COMP%]{font-size:2rem}.stat-value[_ngcontent-%COMP%]{font-size:1.25rem}}@media(max-width:480px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.admin-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.admin-nav[_ngcontent-%COMP%]{overflow-x:auto;padding-bottom:.5rem;width:100%}.admin-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{white-space:nowrap;font-size:.85rem;padding:.4rem .8rem}}"]})};export{U as AdminDashboardComponent};
