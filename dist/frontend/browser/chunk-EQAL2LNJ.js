import{a as Y}from"./chunk-3UGKLAU6.js";import{a as z,b as D,c as M,d as j,e as B,f as U,g as W,h as G,j as R,k as $,l as q,m as H,n as J,q as K,r as Q,s as X}from"./chunk-UFBRTC2V.js";import{e as V,f as L,h as N}from"./chunk-5EQP7JGP.js";import{Da as I,Oa as p,Pa as u,Qa as O,Ra as x,Sa as h,T as _,Ta as C,U as b,Ua as e,Ub as A,Va as t,Wa as g,_a as y,ab as s,cb as d,ib as E,kb as a,lb as f,mb as F,oa as v,ob as w,pb as k,qa as l,qb as S,sb as T,ya as P}from"./chunk-IDMXUBOL.js";var ee=()=>({exact:!0}),te=(o,i)=>i._id;function ne(o,i){if(o&1&&(e(0,"option",14),a(1),t()),o&2){let n=i.$implicit;C("value",n),l(),f(n)}}function ie(o,i){o&1&&(e(0,"div",16),g(1,"div",20),t())}function oe(o,i){if(o&1&&g(0,"img",25),o&2){let n=d().$implicit;C("src",n.image,v)("alt",n.name)}}function re(o,i){if(o&1&&(e(0,"div",26),a(1),t()),o&2){let n=d().$implicit;l(),f(n.name.charAt(0))}}function ae(o,i){o&1&&(e(0,"span",30),a(1,"Veg"),t())}function le(o,i){o&1&&(e(0,"span",31),a(1,"Unavailable"),t())}function me(o,i){if(o&1){let n=y();e(0,"div",22)(1,"div",23)(2,"div",24),p(3,oe,1,2,"img",25)(4,re,2,1,"div",26),t(),e(5,"div",27)(6,"span",28),a(7),t(),e(8,"div",29),p(9,ae,2,0,"span",30),p(10,le,2,0,"span",31),t()()(),e(11,"div",32)(12,"h3"),a(13),t(),e(14,"p"),a(15),t(),e(16,"span",33),a(17),t()(),e(18,"div",34)(19,"button",35),s("click",function(){let m=_(n).$implicit,c=d(2);return b(c.openEditModal(m))}),a(20,"Edit"),t(),e(21,"button",36),s("click",function(){let m=_(n).$implicit,c=d(2);return b(c.deleteItem(m))}),a(22,"Delete"),t()()()}if(o&2){let n=i.$implicit,r=d(2);E("unavailable",!n.isAvailable),l(3),u(n.image?3:4),l(4),f(n.category),l(2),u(n.isVeg?9:-1),l(),u(n.isAvailable?-1:10),l(3),f(n.name),l(2),f(n.description),l(2),f(r.formatPrice(n.price))}}function de(o,i){if(o&1&&(e(0,"div",17),x(1,me,23,9,"div",21,te),t()),o&2){let n=d();l(),h(n.filteredItems)}}function ce(o,i){o&1&&(e(0,"div",18)(1,"span"),a(2,"\u{1F37D}\uFE0F"),t(),e(3,"h3"),a(4,"No items found"),t()())}function se(o,i){if(o&1&&(g(0,"img",60),e(1,"span",61),a(2,"Live Preview"),t()),o&2){let n,r=d(2);C("src",(n=r.menuForm.get("image"))==null?null:n.value,v)}}function ge(o,i){o&1&&(e(0,"div",49),a(1,"No Photo"),t())}function pe(o,i){if(o&1&&(e(0,"option",14),a(1),t()),o&2){let n=i.$implicit;C("value",n),l(),f(n)}}function ue(o,i){if(o&1){let n=y();e(0,"div",37),s("click",function(){_(n);let m=d();return b(m.closeModal())}),e(1,"div",38),s("click",function(m){return _(n),b(m.stopPropagation())}),e(2,"div",39)(3,"h2"),a(4),t(),e(5,"button",40),s("click",function(){_(n);let m=d();return b(m.closeModal())}),a(6,"\u2715"),t()(),e(7,"form",41),s("ngSubmit",function(){_(n);let m=d();return b(m.onSubmit())}),e(8,"div",42)(9,"label"),a(10,"Name *"),t(),g(11,"input",43),t(),e(12,"div",42)(13,"label"),a(14,"Description *"),t(),g(15,"textarea",44),t(),e(16,"div",45)(17,"div",42)(18,"label"),a(19,"Image URL"),t(),g(20,"input",46),e(21,"small",47),a(22,"Paste a direct image link from Unsplash or other sites."),t()(),e(23,"div",48),p(24,se,3,1)(25,ge,2,0,"div",49),t()(),e(26,"div",50)(27,"div",42)(28,"label"),a(29,"Price (\u20B9) *"),t(),g(30,"input",51),t(),e(31,"div",42)(32,"label"),a(33,"Category *"),t(),e(34,"select",52),x(35,pe,2,2,"option",14,O),t()()(),e(37,"div",53)(38,"label",54),g(39,"input",55),a(40," Available "),t(),e(41,"label",54),g(42,"input",56),a(43," Vegetarian "),t()(),e(44,"div",57)(45,"button",58),s("click",function(){_(n);let m=d();return b(m.closeModal())}),a(46,"Cancel"),t(),e(47,"button",59),a(48),t()()()()()}if(o&2){let n,r=d();l(4),f(r.editingItem?"Edit Item":"Add Item"),l(3),C("formGroup",r.menuForm),l(17),u((n=r.menuForm.get("image"))!=null&&n.value?24:25),l(11),h(r.categories),l(12),C("disabled",r.isSubmitting),l(),F(" ",r.editingItem?"Update":"Create"," ")}}var Z=class o{constructor(i,n){this.menuService=i;this.fb=n;this.menuForm=this.fb.group({name:["",[M.required]],description:["",[M.required]],price:["",[M.required,M.min(0)]],category:["Coffee",M.required],image:[""],isAvailable:[!0],isVeg:[!0]})}menuItems=[];filteredItems=[];categories=["Coffee","Beverages","Snacks","Waffle","Cakes"];isLoading=!0;showModal=!1;editingItem=null;menuForm;searchTerm="";selectedCategory="All";isSubmitting=!1;ngOnInit(){this.loadMenuItems()}loadMenuItems(){this.isLoading=!0,this.menuService.getMenuItems().subscribe({next:i=>{i.success&&i.menuItems&&(this.menuItems=i.menuItems,this.filterItems()),this.isLoading=!1},error:()=>{this.isLoading=!1}})}filterItems(){let i=this.menuItems;if(this.selectedCategory!=="All"&&(i=i.filter(n=>n.category===this.selectedCategory)),this.searchTerm){let n=this.searchTerm.toLowerCase();i=i.filter(r=>r.name.toLowerCase().includes(n)||r.description.toLowerCase().includes(n))}this.filteredItems=i}openAddModal(){this.editingItem=null,this.menuForm.reset({category:"Coffee",isAvailable:!0,isVeg:!0}),this.showModal=!0}openEditModal(i){this.editingItem=i,this.menuForm.patchValue({name:i.name,description:i.description,price:i.price,category:i.category,image:i.image,isAvailable:i.isAvailable,isVeg:i.isVeg}),this.showModal=!0}closeModal(){this.showModal=!1,this.editingItem=null}onSubmit(){if(this.menuForm.invalid){this.menuForm.markAllAsTouched();return}this.isSubmitting=!0,this.editingItem?this.menuService.updateMenuItem(this.editingItem._id,this.menuForm.value).subscribe({next:()=>{this.loadMenuItems(),this.closeModal(),this.isSubmitting=!1},error:()=>{this.isSubmitting=!1,alert("Failed to update item")}}):this.menuService.createMenuItem(this.menuForm.value).subscribe({next:()=>{this.loadMenuItems(),this.closeModal(),this.isSubmitting=!1},error:()=>{this.isSubmitting=!1,alert("Failed to create item")}})}deleteItem(i){confirm(`Delete "${i.name}"?`)&&this.menuService.deleteMenuItem(i._id).subscribe({next:()=>this.loadMenuItems(),error:()=>alert("Failed to delete item")})}formatPrice(i){return"\u20B9"+i.toFixed(2)}get f(){return this.menuForm.controls}static \u0275fac=function(n){return new(n||o)(P(Y),P(K))};static \u0275cmp=I({type:o,selectors:[["app-menu-management"]],decls:31,vars:8,consts:[[1,"menu-management"],[1,"admin-header"],[1,"highlight"],[1,"admin-nav"],["routerLink","/admin","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/admin/users","routerLinkActive","active"],["routerLink","/admin/menu","routerLinkActive","active"],["routerLink","/admin/tables","routerLinkActive","active"],["routerLink","/admin/bookings","routerLinkActive","active"],[1,"toolbar"],[1,"filter-group"],["type","text","placeholder","Search items...",3,"ngModelChange","input","ngModel"],[3,"ngModelChange","change","ngModel"],["value","All"],[3,"value"],[1,"btn-add",3,"click"],[1,"loading"],[1,"menu-grid"],[1,"empty-state"],[1,"modal-overlay"],[1,"spinner-large"],[1,"menu-card",3,"unavailable"],[1,"menu-card"],[1,"card-header"],[1,"card-image"],[3,"src","alt"],[1,"image-placeholder"],[1,"card-badges-overlay"],[1,"category-tag"],[1,"badges"],[1,"veg-badge"],[1,"unavailable-badge"],[1,"card-body"],[1,"price"],[1,"card-actions"],[1,"btn-edit",3,"click"],[1,"btn-delete",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","name","placeholder","Item name"],["formControlName","description","placeholder","Description","rows","3"],[1,"form-row","preview-section"],["type","text","formControlName","image","placeholder","https://images.unsplash.com/..."],[1,"help-text"],[1,"image-preview-container"],[1,"preview-placeholder"],[1,"form-row"],["type","number","formControlName","price","placeholder","0.00"],["formControlName","category"],[1,"form-row","checkboxes"],[1,"checkbox-label"],["type","checkbox","formControlName","isAvailable"],["type","checkbox","formControlName","isVeg"],[1,"form-actions"],["type","button",1,"btn-cancel",3,"click"],["type","submit",1,"btn-submit",3,"disabled"],["alt","Preview",1,"admin-preview-img",3,"src"],[1,"image-preview-label"]],template:function(n,r){n&1&&(e(0,"div",0)(1,"div",1)(2,"h1"),a(3,"Menu "),e(4,"span",2),a(5,"Management"),t()(),e(6,"div",3)(7,"a",4),a(8,"Overview"),t(),e(9,"a",5),a(10,"Users"),t(),e(11,"a",6),a(12,"Menu"),t(),e(13,"a",7),a(14,"Tables"),t(),e(15,"a",8),a(16,"Bookings"),t()()(),e(17,"div",9)(18,"div",10)(19,"input",11),S("ngModelChange",function(c){return k(r.searchTerm,c)||(r.searchTerm=c),c}),s("input",function(){return r.filterItems()}),t(),e(20,"select",12),S("ngModelChange",function(c){return k(r.selectedCategory,c)||(r.selectedCategory=c),c}),s("change",function(){return r.filterItems()}),e(21,"option",13),a(22,"All Categories"),t(),x(23,ne,2,2,"option",14,O),t()(),e(25,"button",15),s("click",function(){return r.openAddModal()}),a(26,"+ Add Item"),t()(),p(27,ie,2,0,"div",16),p(28,de,3,0,"div",17),p(29,ce,5,0,"div",18),p(30,ue,49,5,"div",19),t()),n&2&&(l(7),C("routerLinkActiveOptions",T(7,ee)),l(12),w("ngModel",r.searchTerm),l(),w("ngModel",r.selectedCategory),l(3),h(r.categories),l(4),u(r.isLoading?27:-1),l(),u(!r.isLoading&&r.filteredItems.length>0?28:-1),l(),u(!r.isLoading&&r.filteredItems.length===0?29:-1),l(),u(r.showModal?30:-1))},dependencies:[A,N,V,L,Q,W,H,J,D,G,z,q,j,B,U,X,$,R],styles:[".menu-management[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.admin-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;flex-wrap:wrap;gap:1rem}.admin-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;color:#fff}.highlight[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b59b6,#8e44ad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.admin-nav[_ngcontent-%COMP%]{display:flex;gap:.5rem}.admin-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:.5rem 1rem;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:8px;color:#fff;text-decoration:none}.admin-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b59b6,#8e44ad);border-color:transparent}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;margin-bottom:2rem;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;gap:.5rem}.filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.75rem 1rem;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:10px;color:#fff}.btn-add[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:linear-gradient(135deg,#9b59b6,#8e44ad);border:none;border-radius:10px;color:#fff;font-weight:600;cursor:pointer}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem}.spinner-large[_ngcontent-%COMP%]{width:50px;height:50px;border:3px solid rgba(255,255,255,.1);border-top-color:#9b59b6;border-radius:50%;margin:0 auto;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:4rem;display:block;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff}.menu-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem}.menu-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:16px;overflow:hidden;border:1px solid rgba(255,255,255,.1)}.menu-card.unavailable[_ngcontent-%COMP%]{opacity:.6}.card-header[_ngcontent-%COMP%]{position:relative;height:180px;background:#0003;overflow:hidden}.card-image[_ngcontent-%COMP%]{width:100%;height:100%}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.card-image[_ngcontent-%COMP%]   .image-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:3rem;background:linear-gradient(135deg,#2a2a4a,#3a3a5a);color:#fff}.card-badges-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;padding:1rem;display:flex;justify-content:space-between;background:linear-gradient(to bottom,rgba(0,0,0,.7),transparent)}.category-tag[_ngcontent-%COMP%]{color:#f39c12;font-size:.85rem;font-weight:500}.badges[_ngcontent-%COMP%]{display:flex;gap:.5rem}.veg-badge[_ngcontent-%COMP%]{background:#2ecc7133;color:#2ecc71;padding:.2rem .5rem;border-radius:5px;font-size:.75rem}.unavailable-badge[_ngcontent-%COMP%]{background:#e74c3c33;color:#e74c3c;padding:.2rem .5rem;border-radius:5px;font-size:.75rem}.card-body[_ngcontent-%COMP%]{padding:1.25rem}.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-bottom:.5rem}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888;font-size:.9rem;margin-bottom:1rem;line-height:1.4}.price[_ngcontent-%COMP%]{color:#f39c12;font-weight:700;font-size:1.2rem}.card-actions[_ngcontent-%COMP%]{padding:1rem;display:flex;gap:.5rem;border-top:1px solid rgba(255,255,255,.05)}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{flex:1;padding:.5rem;border-radius:8px;cursor:pointer;font-weight:500;border:none}.btn-edit[_ngcontent-%COMP%]{background:#3498db33;color:#3498db}.btn-delete[_ngcontent-%COMP%]{background:#e74c3c33;color:#e74c3c}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem}.modal-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:20px;width:100%;max-width:500px;border:1px solid rgba(255,255,255,.1)}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff}.close-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#888;font-size:1.5rem;cursor:pointer}form[_ngcontent-%COMP%]{padding:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#aaa;font-size:.9rem;margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:10px;color:#fff;font-size:1rem;box-sizing:border-box}.preview-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:1.5rem;align-items:center;background:#0003;padding:1rem;border-radius:12px}.image-preview-container[_ngcontent-%COMP%]{width:100%;height:120px;background:#ffffff08;border:2px dashed rgba(255,255,255,.15);border-radius:12px;overflow:hidden;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:all .3s ease;position:relative}.image-preview-label[_ngcontent-%COMP%]{position:absolute;bottom:5px;font-size:.6rem;color:#f39c12;text-transform:uppercase;letter-spacing:1px;background:#00000080;padding:2px 6px;border-radius:4px}.image-preview-container[_ngcontent-%COMP%]:hover{border-color:#f39c12;background:#ffffff0d}.admin-preview-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.preview-placeholder[_ngcontent-%COMP%]{color:#555;font-size:.8rem;font-weight:600}.help-text[_ngcontent-%COMP%]{display:block;color:#888;font-size:.75rem;margin-top:.25rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.form-row.checkboxes[_ngcontent-%COMP%]{display:flex;gap:2rem;margin:1rem 0}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#fff;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1.5rem}.btn-cancel[_ngcontent-%COMP%]{flex:1;padding:.75rem;background:transparent;border:1px solid rgba(255,255,255,.2);border-radius:10px;color:#fff;cursor:pointer}.btn-submit[_ngcontent-%COMP%]{flex:1;padding:.75rem;background:linear-gradient(135deg,#9b59b6,#8e44ad);border:none;border-radius:10px;color:#fff;font-weight:600;cursor:pointer}.btn-submit[_ngcontent-%COMP%]:disabled{opacity:.7}@media(max-width:768px){.menu-management[_ngcontent-%COMP%]{padding:1rem}.admin-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1.5rem}.admin-nav[_ngcontent-%COMP%]{overflow-x:auto;padding-bottom:.5rem;width:100%;display:flex}.admin-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{white-space:nowrap;font-size:.85rem;padding:.4rem .8rem}.toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-group[_ngcontent-%COMP%]{flex-direction:column}.filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.menu-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media(max-width:480px){.preview-section[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.card-header[_ngcontent-%COMP%]{height:150px}}"]})};export{Z as MenuManagementComponent};
