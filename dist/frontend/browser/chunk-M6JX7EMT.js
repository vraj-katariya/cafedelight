import{a as F}from"./chunk-VVO5EFFG.js";import{a as A}from"./chunk-JLV7PS2X.js";import{Da as M,Ha as m,Oa as u,Pa as x,Qb as y,Rb as w,Sb as D,T as h,Ta as g,Tb as I,U as k,Ua as n,Ub as B,Va as t,_a as O,ab as P,cb as l,ib as _,jb as S,kb as i,lb as c,mb as d,nb as C,qa as o,ub as p,vb as v,wb as E,ya as b}from"./chunk-IDMXUBOL.js";function T(r,a){r&1&&(n(0,"a",18)(1,"span",14),i(2,"\u2699\uFE0F"),t(),n(3,"span",15),i(4,"Admin Panel"),t()())}function L(r,a){if(r&1){let e=O();n(0,"button",31),P("click",function(){h(e);let f=l().$implicit,N=l(3);return k(N.cancelBooking(f._id))}),i(1," Cancel "),t()}}function j(r,a){if(r&1&&(n(0,"div",24)(1,"div",25)(2,"span",26),i(3),p(4,"date"),t(),n(5,"span",27),i(6),t(),n(7,"span",27),i(8),t()(),n(9,"div",28)(10,"span",29),i(11),t(),m(12,L,2,0,"button",30),t()()),r&2){let e=a.$implicit;o(3),C(" ",E(4,9,e.date,"mediumDate")," at ",e.timeSlot," "),o(3),C(" Table ",e.table==null?null:e.table.tableNumber," (",e.guests," Guests) "),o(2),d(" Location: ",e.table==null?null:e.table.location," "),o(2),S("status-"+e.status.toLowerCase()),o(),d(" ",e.status," "),o(),g("ngIf",e.status!=="Cancelled"&&e.status!=="Completed")}}function V(r,a){if(r&1&&(n(0,"div",20)(1,"div",21)(2,"h3"),i(3,"My Bookings"),t()(),n(4,"div",22),m(5,j,13,12,"div",23),t()()),r&2){let e=l(2);o(5),g("ngForOf",e.myBookings)}}function U(r,a){if(r&1&&(n(0,"div",2)(1,"div",3),i(2),t(),n(3,"div",4)(4,"h2"),i(5),t(),n(6,"span",5),i(7),p(8,"titlecase"),t()()(),n(9,"div",6)(10,"h3"),i(11,"Account Information"),t(),n(12,"div",7)(13,"div",8)(14,"span",9),i(15,"Full Name"),t(),n(16,"span",10),i(17),t()(),n(18,"div",8)(19,"span",9),i(20,"Email Address"),t(),n(21,"span",10),i(22),t()(),n(23,"div",8)(24,"span",9),i(25,"Role"),t(),n(26,"span",10)(27,"span",5),i(28),p(29,"titlecase"),t()()(),n(30,"div",8)(31,"span",9),i(32,"Phone"),t(),n(33,"span",10),i(34),t()(),n(35,"div",8)(36,"span",9),i(37,"Address"),t(),n(38,"span",10),i(39),t()(),n(40,"div",8)(41,"span",9),i(42,"Member Since"),t(),n(43,"span",10),i(44),t()()()(),n(45,"div",11)(46,"h3"),i(47,"Quick Actions"),t(),n(48,"div",12)(49,"a",13)(50,"span",14),i(51,"\u{1F37D}\uFE0F"),t(),n(52,"span",15),i(53,"Browse Menu"),t()(),n(54,"a",16)(55,"span",14),i(56,"\u{1F6D2}"),t(),n(57,"span",15),i(58,"View Cart"),t()(),n(59,"a",17)(60,"span",14),i(61,"\u{1F4E6}"),t(),n(62,"span",15),i(63,"My Orders"),t()(),u(64,T,5,0,"a",18),t()(),m(65,V,6,1,"div",19)),r&2){let e=l();o(2),d(" ",e.user.name.charAt(0).toUpperCase()," "),o(3),c(e.user.name),o(),_("admin",e.user.role==="admin"),o(),d(" ",v(8,15,e.user.role)," "),o(10),c(e.user.name),o(5),c(e.user.email),o(5),_("admin",e.user.role==="admin"),o(),d(" ",v(29,17,e.user.role)," "),o(6),c(e.user.phone||"Not provided"),o(5),c(e.user.address||"Not provided"),o(5),c(e.formatDate(e.user.createdAt)),o(20),x(e.user.role==="admin"?64:-1),o(),g("ngIf",e.myBookings.length>0)}}var z=class r{constructor(a,e){this.authService=a;this.bookingService=e}user=null;myBookings=[];ngOnInit(){this.user=this.authService.currentUserValue,this.loadMyBookings()}loadMyBookings(){this.bookingService.getMyBookings().subscribe({next:a=>{this.myBookings=a.data},error:a=>console.error(a)})}cancelBooking(a){confirm("Are you sure you want to cancel this booking?")&&this.bookingService.cancelBooking(a).subscribe(()=>{this.loadMyBookings(),this.bookingService.getMyBookings().subscribe(e=>{let s=e.data.some(f=>f.status!=="Cancelled");this.authService.setHasBooking(s)})})}formatDate(a){return new Date(a).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})}static \u0275fac=function(e){return new(e||r)(b(A),b(F))};static \u0275cmp=M({type:r,selectors:[["app-dashboard"]],decls:6,vars:1,consts:[[1,"dashboard-page"],[1,"highlight"],[1,"profile-card"],[1,"profile-avatar"],[1,"profile-info"],[1,"role-badge"],[1,"info-section"],[1,"info-table"],[1,"info-row"],[1,"label"],[1,"value"],[1,"quick-actions"],[1,"actions-grid"],["routerLink","/menu",1,"action-card"],[1,"action-icon"],[1,"action-text"],["routerLink","/cart",1,"action-card"],["routerLink","/orders",1,"action-card"],["routerLink","/admin",1,"action-card","admin"],["class","my-bookings-section",4,"ngIf"],[1,"my-bookings-section"],[1,"section-header"],[1,"bookings-grid"],["class","booking-card",4,"ngFor","ngForOf"],[1,"booking-card"],[1,"booking-details"],[1,"booking-date"],[1,"booking-meta"],[1,"booking-actions"],[1,"status-badge"],["class","btn-cancel",3,"click",4,"ngIf"],[1,"btn-cancel",3,"click"]],template:function(e,s){e&1&&(n(0,"div",0)(1,"h1"),i(2,"My "),n(3,"span",1),i(4,"Dashboard"),t()(),u(5,U,66,19),t()),e&2&&(o(5),x(s.user?5:-1))},dependencies:[B,y,w,D,I],styles:[".dashboard-page[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:2rem}.dashboard-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#fff;margin-bottom:2rem}.highlight[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f39c12,#e74c3c);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.profile-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:20px;padding:2rem;margin-bottom:2rem;border:1px solid rgba(255,255,255,.1)}.profile-avatar[_ngcontent-%COMP%]{width:80px;height:80px;background:linear-gradient(135deg,#f39c12,#e74c3c);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2.5rem;color:#fff;font-weight:700}.profile-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:.5rem;font-size:1.5rem}.role-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;background:#2ecc7133;color:#2ecc71;border-radius:15px;font-size:.85rem;font-weight:500}.role-badge.admin[_ngcontent-%COMP%]{background:#9b59b633;color:#9b59b6}.info-section[_ngcontent-%COMP%]{margin-bottom:2rem}.info-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-bottom:1rem;font-size:1.2rem}.info-table[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:16px;overflow:hidden;border:1px solid rgba(255,255,255,.1)}.info-row[_ngcontent-%COMP%]{display:flex;padding:1rem 1.5rem;border-bottom:1px solid rgba(255,255,255,.05)}.info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:150px;color:#888;font-weight:500}.info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex:1;color:#fff}.quick-actions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-bottom:1rem;font-size:1.2rem}.actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1rem}.action-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.75rem;padding:1.5rem;background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:16px;text-decoration:none;border:1px solid rgba(255,255,255,.1);transition:all .3s ease}.action-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);border-color:#f39c12}.action-card.admin[_ngcontent-%COMP%]{border-color:#9b59b64d}.action-card.admin[_ngcontent-%COMP%]:hover{border-color:#9b59b6}.action-icon[_ngcontent-%COMP%]{font-size:2.5rem}.action-text[_ngcontent-%COMP%]{color:#fff;font-weight:500}.my-bookings-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a1a2e,#16213e);padding:2rem;border-radius:16px;margin-top:2rem;border:1px solid rgba(255,255,255,.1)}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin:0}.bookings-grid[_ngcontent-%COMP%]{display:grid;gap:1rem}.booking-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;border:1px solid rgba(255,255,255,.05);border-radius:8px;background:#ffffff0d}.booking-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.booking-date[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem;color:#f0f0f0}.booking-meta[_ngcontent-%COMP%]{font-size:.9rem;color:#aaa}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:50px;font-size:.8rem;font-weight:600;text-transform:uppercase;margin-left:1rem}.status-pending[_ngcontent-%COMP%]{background:#ffc10733;color:#ffc107}.status-confirmed[_ngcontent-%COMP%]{background:#28a74533;color:#28a745}.status-cancelled[_ngcontent-%COMP%]{background:#dc354533;color:#dc3545}.status-completed[_ngcontent-%COMP%]{background:#007bff33;color:#007bff}.btn-cancel[_ngcontent-%COMP%]{background:transparent;border:1px solid #dc3545;color:#dc3545;padding:.5rem 1rem;border-radius:6px;cursor:pointer;transition:all .2s}.btn-cancel[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff}@media(max-width:600px){.profile-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.info-row[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}.info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:100%}.booking-card[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}}"]})};export{z as DashboardComponent};
